---
import Layout from "../layouts/Layout.astro";
import ProductCard from "../components/ProductCard.tsx";
import type { IProduct } from "../types";
import Visible from "../components/Visible.tsx";

const response = await fetch("https://fakestoreapi.com/products");
const products = await response.json() as IProduct[];

---

<Layout title="products">

  <h1 class="text-2xl font-bold">Products page</h1>

  {
    products.map(prod => <ProductCard client:load product={prod} />)
  }

  <Visible client:load />

</Layout>